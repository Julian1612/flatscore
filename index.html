<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wohnungs-Profi | V3 Final</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/app.js" defer></script>
</head>
<body>

<header>
    <h1>üè° Wohnungs-Profi</h1>
    <nav>
        <button onclick="switchView('list')" class="btn-nav active" id="nav-list">Meine Liste</button>
        <button onclick="switchView('new')" class="btn-nav" id="nav-new">Neue Wohnung</button>
        <button onclick="switchView('config')" class="btn-nav" id="nav-config">Kriterien</button>
    </nav>
</header>

<div id="mascot-feedback" class="view-section active" style="padding-bottom: 0;">
    <div class="mascot-area">
        <div class="mascot" style="background:var(--pastel-green);">
            <svg viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="45" fill="#fff" />
                <path d="M30,40 Q20,20 40,30" fill="#d4a373" />
                <path d="M70,40 Q80,20 60,30" fill="#d4a373" />
                <circle cx="35" cy="45" r="5" fill="#333" />
                <circle cx="65" cy="45" r="5" fill="#333" />
                <ellipse cx="50" cy="55" rx="8" ry="6" fill="#333" />
                <path d="M45,65 Q50,75 55,65" stroke="#333" stroke-width="2" fill="none"/>
            </svg>
        </div>
        <div class="speech-bubble" id="speech-text">
            Hallo! Lass uns dein perfektes Zuhause finden.
        </div>
        <div class="mascot" style="background:var(--pastel-red);">
             <svg viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="45" fill="#fff" />
                <path d="M25,25 L35,45 L45,25 Z" fill="#333" />
                <path d="M55,25 L65,45 L75,25 Z" fill="#333" />
                <path d="M30,30 Q50,90 70,30" fill="#333" />
                <circle cx="40" cy="50" r="3" fill="#fff" />
                <circle cx="60" cy="50" r="3" fill="#fff" />
                <rect x="45" y="70" width="10" height="5" fill="#fff" />
            </svg>
        </div>
    </div>
</div>

<div id="view-list" class="view-section active">
    <div id="apartments-container"></div>
    <div id="empty-state" style="text-align: center; color: #888; margin-top: 50px; display: none;">
        Noch leer hier.<br>Klicke auf "Neue Wohnung"!
    </div>
</div>

<div id="view-new" class="view-section">
    <input type="hidden" id="edit-id" value="">
    
    <div id="form-header" style="text-align:center; margin-bottom:20px; color:#888; font-weight:bold;">
        Neue Wohnung anlegen
    </div>

    <div class="form-section">
        <h3>üìç Wo & Wie gro√ü?</h3>
        <div class="form-grid">
            <div class="full-width">
                <label>Link zum Inserat (Optional)</label>
                <input type="url" id="f-link" placeholder="www.immowelt.de/...">
            </div>
            <div class="full-width">
                <label>Stra√üe & Hausnummer</label>
                <input type="text" id="f-street" placeholder="Musterstra√üe 12">
            </div>
            <div>
                <label>PLZ</label>
                <input type="text" id="f-zip" placeholder="12345">
            </div>
            <div>
                <label>Stadt</label>
                <input type="text" id="f-city" placeholder="Berlin">
            </div>
            <div>
                <label>Gr√∂√üe (m¬≤)</label>
                <input type="number" id="f-size" placeholder="65">
            </div>
            <div>
                <label>Zimmer</label>
                <input type="number" id="f-rooms" placeholder="2.5">
            </div>
            <div>
                <label>Etage</label>
                <input type="text" id="f-floor" placeholder="3. OG">
            </div>
            <div>
                <label>Frei ab</label>
                <input type="text" id="f-date" placeholder="sofort">
            </div>
        </div>
    </div>

    <div class="form-section" style="border-left: 4px solid var(--pastel-yellow-dark);">
        <h3>üí∂ Die Kosten (Monatlich)</h3>
        <div class="form-grid">
            <div>
                <label>Kaltmiete (‚Ç¨)</label>
                <input type="number" id="f-cold" placeholder="800">
            </div>
            <div>
                <label>Nebenkosten (‚Ç¨)</label>
                <input type="number" id="f-nk" placeholder="150">
            </div>
            <div>
                <label>Heizkosten (‚Ç¨)</label>
                <input type="number" id="f-heat" placeholder="inkl. oder extra">
            </div>
            <div>
                <label><strong>Warmmiete (‚Ç¨)</strong></label>
                <input type="number" id="f-warm" placeholder="950" style="font-weight:bold; background:#fffef0;">
            </div>
            <div class="full-width">
                 <label>Kaution (Total ‚Ç¨)</label>
                 <input type="number" id="f-deposit" placeholder="2400">
            </div>
        </div>
    </div>

    <div class="form-section">
        <h3>üìû Kontakt & Infos</h3>
        <div class="form-grid">
            <div>
                <label>Kontakt Name</label>
                <input type="text" id="f-contact-name" placeholder="Hr. M√ºller">
            </div>
            <div>
                <label>Telefon / Email</label>
                <input type="text" id="f-contact-info" placeholder="017...">
            </div>
            <div class="full-width">
                <label>Sonstige Notizen</label>
                <textarea id="f-notes" rows="3" placeholder="Baujahr, Energieausweis, Gef√ºhl..."></textarea>
            </div>
        </div>
    </div>

    <div id="evaluation-form"></div>

    <button class="btn-action" onclick="calculateAndSave()">Speichern & Auswerten</button>
    <button onclick="cancelEdit()" style="width:100%; margin-top:10px; background:transparent; color:#888; border:none; cursor:pointer;">Abbrechen</button>
</div>

<div id="view-config" class="view-section">
    <div class="speech-bubble">Hier definierst du die "weichen" Faktoren f√ºr das Ampel-System.</div>
    <div class="form-section b-red">
        <h3>üî¥ Red Lights (Dealbreaker)</h3>
        <div style="display:flex; gap:5px;">
            <input type="text" id="input-red" placeholder="Neues Kriterium...">
            <button onclick="addCriterion('red')" style="background:var(--pastel-red-dark); color:white;">+</button>
        </div>
        <ul id="list-red" class="config-list"></ul>
    </div>
    <div class="form-section b-yellow">
        <h3>üü° Yellow Lights (Naja...)</h3>
        <div style="display:flex; gap:5px;">
            <input type="text" id="input-yellow" placeholder="Neues Kriterium...">
            <button onclick="addCriterion('yellow')" style="background:var(--pastel-yellow-dark); color:black;">+</button>
        </div>
        <ul id="list-yellow" class="config-list"></ul>
    </div>
    <div class="form-section b-green">
        <h3>üü¢ Green Lights (Super!)</h3>
        <div style="display:flex; gap:5px;">
            <input type="text" id="input-green" placeholder="Neues Kriterium...">
            <button onclick="addCriterion('green')" style="background:var(--pastel-green-dark); color:white;">+</button>
        </div>
        <ul id="list-green" class="config-list"></ul>
    </div>
    <button class="btn-test" onclick="loadTestData()">üõ†Ô∏è 2 Test-Inserate laden (Reset)</button>
</div>

<div id="delete-modal" class="modal-overlay">
    <div class="modal-box">
        <h3>üóëÔ∏è Wirklich l√∂schen?</h3>
        <p>Du kannst das nicht r√ºckg√§ngig machen.</p>
        <div class="modal-buttons">
            <button onclick="closeModal()" class="btn-cancel">Abbrechen</button>
            <button onclick="confirmDelete()" class="btn-confirm">Ja, l√∂schen</button>
        </div>
    </div>
</div>

</body>
</html>